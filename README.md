# Netty Project

# 个人博客

-------

![](http://www.yunai.me/images/common/wechat_mp.jpeg)

> 🙂🙂🙂关注**微信公众号：【芋艿的后端小屋】**有福利：  
> 1. RocketMQ / MyCAT / Sharding-JDBC **所有**源码分析文章列表  
> 2. RocketMQ / MyCAT / Sharding-JDBC **中文注释源码 GitHub 地址**  
> 3. 您对于源码的疑问每条留言**都**将得到**认真**回复。**甚至不知道如何读源码也可以请教噢**。  
> 4. **新的**源码解析文章**实时**收到通知。**每周更新一篇左右**。

* 网络应用框架 **Netty**

    * [《精尽 Netty 源码分析 —— 调试环境搭建》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码分析 —— NIO 基础（一）之简介》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码分析 —— NIO 基础（二）之 Channel》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码分析 —— NIO 基础（三）之 Buffer》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码分析 —— NIO 基础（四）之 Selector》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码分析 —— NIO 基础（五）之示例》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码分析 —— Netty 简介（一）之项目结构》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码分析 —— Netty 简介（二）之核心组件》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码分析 —— 启动（一）之服务端》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码分析 —— 启动（二）之客户端》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— EventLoop（一）之 Reactor 模型》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— EventLoop（二）之 EventLoopGroup》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— EventLoop（三）之 EventLoop 初始化》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— EventLoop（四）之 EventLoop 运行》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— EventLoop（五）之 EventLoop 处理 IO 事件》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— EventLoop（六）之 EventLoop 处理普通任务》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— EventLoop（七）之 EventLoop 处理定时任务》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— EventLoop（八）之 EventLoop 优雅关闭》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— ChannelPipeline（一）之初始化》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— ChannelPipeline（二）之添加 ChannelHandler》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— ChannelPipeline（三）之移除 ChannelHandler》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— ChannelPipeline（四）之 Outbound 事件的传播》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— ChannelPipeline（五）之 Inbound 事件的传播》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— ChannelPipeline（六）之异常事件的传播》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Channel（一）之简介》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Channel（二）之 accept 操作》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Channel（三）之 read 操作》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Channel（四）之 write 操作》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Channel（五）之 flush 操作》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Channel（六）之 writeAndFlush 操作》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Channel（七）之 close 操作》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Channel（八）之 disconnect 操作》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Buffer 之 ByteBuf（一）简介》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Buffer 之 ByteBuf（二）核心子类》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Buffer 之 ByteBuf（三）内存泄露检测》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Buffer 之 ByteBuf（四）其它子类》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Buffer 之 ByteBufAllocator（一）简介》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Buffer 之 ByteBufAllocator（二）UnpooledByteBufAllocator》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Buffer 之 ByteBufAllocator（三）PooledByteBufAllocator》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Buffer 之 Jemalloc（一）简介》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Buffer 之 Jemalloc（二）PoolChunk》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Buffer 之 Jemalloc（三）PoolSubpage》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Buffer 之 Jemalloc（四）PoolChunkList》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Buffer 之 Jemalloc（五）PoolArena》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Buffer 之 Jemalloc（六）PoolThreadCache》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— ChannelHandler（一）之简介》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— ChannelHandler（二）之 ChannelInitializer》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— ChannelHandler（三）之 SimpleChannelInboundHandler》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— ChannelHandler（四）之 LoggingHandler》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— ChannelHandler（五）之 IdleStateHandler》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— ChannelHandler（六）之 AbstractTrafficShapingHandler》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Codec 之 ByteToMessageDecoder（一）Cumulator》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Codec 之 ByteToMessageDecoder（二）FrameDecoder》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Codec 之 MessageToByteEncoder》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Codec 之 ByteToMessageCodec》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Codec 之 MessageToMessageCodec》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Util 之 Future》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Util 之 FastThreadLocal》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Util 之 Recycler》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Util 之 HashedWheelTimer》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)
    * [《精尽 Netty 源码解析 —— Util 之 MpscUnboundedArrayQueue》](http://www.iocoder.cn/Netty/Netty-collection?github&1612)

-------

Netty is an asynchronous event-driven network application framework for rapid development of maintainable high performance protocol servers & clients.

## Links

* [Web Site](http://netty.io/)
* [Downloads](http://netty.io/downloads.html)
* [Documentation](http://netty.io/wiki/)
* [@netty_project](https://twitter.com/netty_project)

## How to build

For the detailed information about building and developing Netty, please visit [the developer guide](http://netty.io/wiki/developer-guide.html).  This page only gives very basic information.

You require the following to build Netty:

* Latest stable [Oracle JDK 7](http://www.oracle.com/technetwork/java/)
* Latest stable [Apache Maven](http://maven.apache.org/)
* If you are on Linux, you need [additional development packages](http://netty.io/wiki/native-transports.html) installed on your system, because you'll build the native transport.

Note that this is build-time requirement.  JDK 5 (for 3.x) or 6 (for 4.0+) is enough to run your Netty-based application.

## Branches to look

Development of all versions takes place in each branch whose name is identical to `<majorVersion>.<minorVersion>`.  For example, the development of 3.9 and 4.0 resides in [the branch '3.9'](https://github.com/netty/netty/tree/3.9) and [the branch '4.0'](https://github.com/netty/netty/tree/4.0) respectively.

## Usage with JDK 9

Netty can be used in modular JDK9 applications as a collection of automatic modules. The module names follow the
reverse-DNS style, and are derived from subproject names rather than root packages due to historical reasons. They
are listed below:

 * `io.netty.all`
 * `io.netty.buffer` 该项目实现了 Netty 架构图中的 Zero-Copy-Capable Rich Byte Buffer 。buffer 项目，该项目下是 Netty 自行实现的一个 Byte Buffer 字节缓冲区。该包的实现相对于 JDK 自带的 ByteBuffer 有很多优点：无论是 API 的功能，使用体验，性能都要更加优秀。它提供了一系列( 多种 )的抽象定义以及实现，以满足不同场景下的需要。
 该项目下是netty自行实现的一个ByteBuf字节缓冲区。该包的实现相对于jdk自带的ByteBuffer有很多优点，无论是API的功能，使用体验，性能都要更有，这些实现满足不同需求的实现类。它提供了一系列的抽象定义以及实现。该项目实现了netty架构图中的Zerocopy ByteBuf；
 * `io.netty.codec` 该项目实现了Netty 架构图中的 Protocol Support 。codec 项目，该项目是协议编解码的抽象与部分实现：JSON、Google Protocol、Base64、XML 等等。另外，它提供了多个子项目，实现不同协议的编解码。例如：codec-dns、codec-haproxy、codec-http、codec-http2、codec-mqtt、codec-redis、codec-memcached、codec-smtp、codec-socks、codec-stomp、codec-xml 等等。
 该项目是协议编解码的抽象与实现。通过不同的子项目来实现http/http2/dns/redis/protocolbuffer等不同协议的支持。它与其它协议的客户端包和组件的区别是非常灵活，可以开发一些特定的场景的客户端或者服务端，该项目实现了netty架构图中的Protocal Support。
    * `io.netty.codec.dns`
    * `io.netty.codec.haproxy`
    * `io.netty.codec.http`
    * `io.netty.codec.http2`
    * `io.netty.codec.memcache`
    * `io.netty.codec.mqtt`
    * `io.netty.codec.redis`
    * `io.netty.codec.smtp`
    * `io.netty.codec.socks`
    * `io.netty.codec.stomp`
    * `io.netty.codec.xml`
 * `io.netty.common` common 项目，该项目是一个通用的工具类项目，几乎被所有的其它项目依赖使用，它提供了一些数据类型处理工具类，并发编程以及多线程的扩展，计数器等等通用的工具类。
 * `io.netty.handler` handler 项目，该项目是提供内置的连接通道处理器( ChannelHandler )实现类。例如：SSL 处理器、日志处理器等等。另外，它提供了一个子项目 handler-proxy ，实现对 HTTP、Socks 4、Socks 5 的代理转发。
 * `io.netty.handler.proxy`
 * `io.netty.resolver`
 * `io.netty.resolver.dns`
 * `io.netty.transport` 该项是核心项目，实现了 Netty 架构图中 Transport Services、Universal Communication API 和 Extensible Event Model 等多部分内容。transport 项目，该项目是网络传输通道的抽象和实现。它定义通信的统一通信 API ，统一了 JDK 的 OIO、NIO ( 不包括 AIO )等多种编程接口。另外，它提供了多个子项目，实现不同的传输类型。例如：transport-native-epoll、transport-native-kqueue、transport-rxtx、transport-udt 和 transport-sctp 等等。
 该项目是网络传输通道的抽象和实现，定义通讯的统一通讯API，它统一了jdk的oio，nio和aio等多种编程接口，它提供了多种实现，包括native-epoll,sctp,udt和sctp等子项目实现不同的传输实现类型。该项是核心项目，实现了netty架构图中Transport Services、Universal Communication API和Extensible Event Model等多部分内容。
   * `io.netty.transport.epoll` (`native` omitted - reserved keyword in Java)
   * `io.netty.transport.kqueue` (`native` omitted - reserved keyword in Java)
   * `io.netty.transport.unix.common` (`native` omitted - reserved keyword in Java)
   * `io.netty.transport.rxtx`
   * `io.netty.transport.sctp`
   * `io.netty.transport.udt`
 * `io.netty.example` example 项目，该项目是提供各种 Netty 使用示例，良心开源项目。
 
 * `其它项目` Netty 中还有其它项目，考虑到不是本系列的重点，就暂时进行省略。all ：All In One 的 pom 声明。
                                            bom ：Netty Bill Of Materials 的缩写，不了解的胖友，可以看看 《Maven 与Spring BOM( Bill Of Materials )简化 Spring 版本控制》 。
                                            microbench ：微基准测试。
                                            resolver ：终端( Endpoint ) 的地址解析器。
                                            resolver-dns
                                            tarball ：All In One 打包工具。
 ````                                       testsuite ：测试集。测试集( TestSuite ) ：测试集是把多个相关测试归入一个组的表达方式。在 Junit 中，如果我们没有明确的定义一个测试集，那么 Juint 会自动的提供一个测试集。一个测试集一般将同一个包的测试类归入一组。
                                            
 ````

## 架构描述
 * Core ：核心部分，是底层的网络通用抽象和部分实现。这部分内容是关键
     *  Extensible Event Model ：可拓展的事件模型。Netty 是基于事件模型的网络应用框架。
     *  Universal Communication API ：通用的通信 API 层。Netty 定义了一套抽象的通用通信层的 API 。
     *  Zero-Copy-Capable Rich Byte Buffer ：支持零拷贝特性的 Byte Buffer 实现。 支持零拷贝能力的字节缓存。 这是netty字节流缓存的关键，支持“零拷贝”技术，以提升性能。
 * Transport Services ：传输( 通信 )服务，具体的网络传输的定义与实现。
     *  Socket & Datagram ：TCP 和 UDP 的传输实现。
     *  HTTP Tunnel ：HTTP 通道的传输实现。
     *  In-VM Piple ：JVM 内部的传输实现。😈 理解起来有点怪，后续看具体代码，会易懂。    
 * Protocol Support ：协议支持。Netty 对于一些通用协议的编解码实现。例如：HTTP、Redis、DNS 等等。  
 
Automatic modules do not provide any means to declare dependencies, so you need to list each used module separately
in your `module-info` file.


在网络协议的标准多层视图中，传输层提供了端到端的或者主机
到主机的通信服务。
因特网通信是建立在 TCP 传输之上的。除了一些由 Java NIO 实现提供的服务器端性能增强之外，
NIO 传输大多数时候指的就是 TCP 传输。


